{"version":3,"sources":["webpack://laravel-react/./resources/js/modules/auth/pages/login/Page.js","webpack://laravel-react/./resources/js/modules/auth/pages/login/components/Form.js","webpack://laravel-react/./resources/js/modules/auth/pages/login/index.js"],"names":["Page","props","name","value","errors","validator","setState","credentials","state","remove","validate","then","e","preventDefault","validateAll","success","submit","Validator","email","password","remember","$","attr","removeAttr","dispatch","login","error","statusCode","_","message","field","add","isAuthenticated","handleChange","handleSubmit","Component","PropTypes","isRequired","displayName","propTypes","Form","has","target","first","any","mapStateToProps","auth","connect"],"mappings":"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","file":"js/resources_js_modules_auth_pages_login_index_js.js","sourcesContent":[" // import libs\r\nimport React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport $ from 'jquery'\r\nimport _ from 'lodash'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { login } from '../../service'\r\nimport { Validator } from 'ree-validate'\r\n\r\n// import components\r\nimport Form from './components/Form'\r\n\r\n// initialize component\r\nclass Page extends Component {\r\n  // set name of the component\r\n  static displayName = 'LoginPage'\r\n\r\n  // validate props\r\n  static propTypes = {\r\n    isAuthenticated: PropTypes.bool.isRequired,\r\n    dispatch: PropTypes.func.isRequired\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.validator = new Validator({\r\n      email: 'required|email',\r\n      password: 'required|min:6'\r\n    })\r\n\r\n    // set the state of the app\r\n    this.state = {\r\n      credentials: {\r\n        email: '',\r\n        password: '',\r\n        remember: false,\r\n      },\r\n      errors: this.validator.errors\r\n    }\r\n  }\r\n\r\n  // after mounting the component add a style to the body\r\n  componentDidMount() {\r\n    $('body').attr('style', 'background-color: #eee')\r\n  }\r\n\r\n  // remove body style before component leaves dom\r\n  componentWillUnmount() {\r\n    $('body').removeAttr('style')\r\n  }\r\n\r\n  // event to handle input change\r\n  handleChange = (name, value) => {\r\n    const { errors } = this.validator\r\n\r\n    this.setState({ credentials: { ...this.state.credentials, [name]: value } })\r\n\r\n    errors.remove(name)\r\n\r\n    this.validator.validate(name, value)\r\n      .then(() => {\r\n        this.setState({ errors })\r\n      })\r\n  }\r\n\r\n  // event to handle form submit\r\n  handleSubmit = e => {\r\n    e.preventDefault()\r\n    const { credentials } = this.state\r\n    const { errors } = this.validator\r\n\r\n    this.validator.validateAll(credentials)\r\n      .then((success) => {\r\n        if (success) {\r\n          this.submit(credentials)\r\n        } else {\r\n          this.setState({ errors })\r\n        }\r\n      })\r\n  }\r\n\r\n  submit(credentials) {\r\n    this.props.dispatch(login(credentials))\r\n      .catch(({ error, statusCode }) => {\r\n        const { errors } = this.validator\r\n\r\n        if (statusCode === 422) {\r\n          _.forOwn(error, (message, field) => {\r\n            errors.add(field, message);\r\n          });\r\n        } else if (statusCode === 401) {\r\n          errors.add('password', error);\r\n        }\r\n\r\n        this.setState({ errors })\r\n      })\r\n  }\r\n\r\n  // render component\r\n  render() {\r\n\r\n    // check if user is authenticated then redirect him to home page\r\n    if (this.props.isAuthenticated) {\r\n      return <Redirect to=\"/\" />\r\n    }\r\n    const props = {\r\n      email: this.state.credentials.email,\r\n      password: this.state.credentials.password,\r\n      remember: this.state.credentials.remember,\r\n      errors: this.state.errors,\r\n      handleChange: this.handleChange,\r\n      handleSubmit: this.handleSubmit,\r\n    }\r\n\r\n    return (<div className=\"container py-5\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-12\">\r\n          <div className=\"row\">\r\n            <div className=\"mx-auto\">\r\n              <span className=\"anchor\"/>\r\n              <div className=\"card has-shadow\">\r\n                <div className=\"card-body\">\r\n                  <Form {...props} />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>)\r\n  }\r\n}\r\n\r\nexport default Page\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst displayName = 'LoginForm'\r\nconst propTypes = {\r\n  email: PropTypes.string,\r\n  password: PropTypes.string,\r\n  remember: PropTypes.bool,\r\n  errors: PropTypes.object.isRequired,\r\n  handleSubmit: PropTypes.func.isRequired,\r\n  handleChange: PropTypes.func.isRequired,\r\n}\r\n\r\nconst Form = ({ email, password, remember, errors, handleChange, handleSubmit }) => (\r\n  <form className=\"form\" role=\"form\" onSubmit={handleSubmit} noValidate>\r\n    <h2 className=\"card-title\">Please sign in</h2>\r\n    <div className=\"form-group\">\r\n      <label htmlFor=\"email\" className=\"sr-only\">Email</label>\r\n      <input type=\"text\"\r\n             className={`form-control form-control-lg rounded-0 ${errors.has('email') && 'is-invalid'}`}\r\n             name=\"email\"\r\n             id=\"email\"\r\n             placeholder=\"Email address\"\r\n             value={email || ''}\r\n             onChange={e => handleChange(e.target.name, e.target.value)}\r\n             required\r\n             autoFocus/>\r\n      {errors.has('email') && <div className=\"invalid-feedback\">{errors.first('email')}</div>}\r\n    </div>\r\n    <div className=\"form-group\">\r\n      <label htmlFor=\"password\" className=\"sr-only\">Password</label>\r\n      <input type=\"password\"\r\n             className={`form-control form-control-lg rounded-0 ${errors.has('password') && 'is-invalid'}`}\r\n             id=\"password\"\r\n             name=\"password\"\r\n             placeholder=\"Password\"\r\n             value={password || ''}\r\n             onChange={e => handleChange(e.target.name, e.target.value)}\r\n             required/>\r\n      {errors.has('password') && <div className=\"invalid-feedback\">{errors.first('password')}</div>}\r\n    </div>\r\n    <div>\r\n      <label className=\"custom-control custom-checkbox\">\r\n        <input type=\"checkbox\"\r\n               name=\"remember\"\r\n               className=\"custom-control-input\"\r\n               onChange={e => handleChange(e.target.name, !remember)}/>\r\n        <span className=\"custom-control-indicator\" />\r\n        <span className=\"custom-control-description small\">Remember me on this computer</span>\r\n      </label>\r\n    </div>\r\n    <button className=\"btn btn-lg btn-primary btn-block\"\r\n            type=\"submit\"\r\n            disabled={errors.any()}>Sign In</button>\r\n    <p>Not a member? <Link to='/register'>Signup here</Link></p>\r\n  </form>\r\n)\r\n\r\nForm.displayName = displayName\r\nForm.propTypes = propTypes\r\n\r\nexport default Form\r\n","// import libs\r\nimport { connect } from 'react-redux'\r\n\r\n// import components\r\nimport Page from './Page'\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    isAuthenticated: state.auth.isAuthenticated,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Page)\r\n"],"sourceRoot":""}